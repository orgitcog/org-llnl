###############################################################################
# Copyright (c) 2020-25, Lawrence Livermore National Security, LLC and CARE
# project contributors. See the CARE LICENSE file for details.
#
# SPDX-License-Identifier: BSD-3-Clause
###############################################################################

# This file defines project-specific VARIABLES ONLY.
# It is included in the PARENT pipeline (.gitlab-ci.yml) to provide
# variables that are passed as component inputs and forwarded to child pipelines.

###############################################################################
# MACHINE-SPECIFIC ALLOCATION VARIABLES
###############################################################################

variables:
  # Allocation name (used for shared allocations)
  ALLOC_NAME: ${CI_PROJECT_NAME}_ci_${CI_PIPELINE_ID}

  # Dane (SLURM) allocation settings
  DANE_SHARED_ALLOC: "--exclusive --reservation=ci --time=10 --nodes=1"
  # Note: we repeat the reservation, helpful when jobs are manually re-triggered.
  DANE_JOB_ALLOC: "--overlap --reservation=ci --nodes=1"
  # Project specific variants for dane
  PROJECT_DANE_VARIANTS: ""
  # Project specific deps for dane
  PROJECT_DANE_DEPS: "^umpire~c~shared ^raja~examples~exercises~tests ^chai~shared~examples "

  # Matrix (SLURM) allocation settings
  MATRIX_SHARED_ALLOC: "--exclusive --partition=pdebug --time=10 --nodes=1"
  # Note: we repeat the reservation, helpful when jobs are manually re-triggered.
  MATRIX_JOB_ALLOC: "--partition=pdebug --overlap --nodes=1"
  # Project specific variants for matrix
  PROJECT_MATRIX_VARIANTS: "+cuda cuda_arch=75"
  # Project specific deps for matrix
  PROJECT_MATRIX_DEPS: "^umpire~c~shared ^raja~examples~exercises~tests ^chai~shared~examples "

  # Corona (flux) allocation settings
  CORONA_SHARED_ALLOC: "--exclusive --time-limit=20m --nodes=1"
  CORONA_JOB_ALLOC: "--nodes=1 --begin-time=+5s"
  # Project specific variants for corona
  PROJECT_CORONA_VARIANTS: ""
  # Project specific deps for corona
  PROJECT_CORONA_DEPS: "^umpire~c~shared ^raja~examples~exercises~tests ^chai~shared~examples "

  # Tioga (flux) allocation settings
  TIOGA_SHARED_ALLOC: "--queue=pci --exclusive --time-limit=20m --nodes=1"
  TIOGA_JOB_ALLOC: "--nodes=1 --begin-time=+5s"
  # Project specific variants for tioga
  PROJECT_TIOGA_VARIANTS: ""
  # Project specific deps for tioga
  PROJECT_TIOGA_DEPS: "^umpire~c~shared ^raja~examples~exercises~tests ^chai~shared~examples "

  # Tuolumne (flux) allocation settings
  TUOLUMNE_SHARED_ALLOC: "--queue=pci --exclusive --time-limit=20m --nodes=1"
  TUOLUMNE_JOB_ALLOC: "--nodes=1 --begin-time=+5s"
  # Project specific variants for tuolumne
  PROJECT_TUOLUMNE_VARIANTS: ""
  # Project specific deps for tuolumne
  PROJECT_TUOLUMNE_DEPS: "^umpire~c~shared ^raja~examples~exercises~tests ^chai~shared~examples "
