.on_host_template:
  rules:
    - if: $CI_PIPELINE_SOURCE == "schedule" || $ADVANCED_JOB == "ON" && $CI_COMMIT_BRANCH
        != "main" && $CI_COMMIT_BRANCH != "develop" && $ALL_TARGETS != "ON"
      when: never
    - if: $CI_JOB_NAME =~ /release_resources|cleanup_pipeline_dir/ && $CI_PIPELINE_SOURCE
        != "schedule"
      when: always
    - when: on_success
    - changes:
        - .gitlab-ci.yml
        - .gitlab/**
        - bin/**
        - experiments/$BENCHMARK/**
        - systems/$ARCHCONFIG/**
        - repo/$BENCHMARK/**
        - modifiers/**
        - var/**
        - lib/**
.nightly_rules:
  rules:
    - if: $CI_PIPELINE_SOURCE == "schedule"
      when: always
    - if: $CI_PIPELINE_SOURCE != "schedule"
      when: never
